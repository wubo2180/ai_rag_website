import{_ as el,u as ll,r as f,n as be,a as ie,p as tl,c as $,o as v,b as r,d as l,B as L,q as z,K as al,w as a,h as i,e as m,f as g,L as sl,y as c,F as de,v as ue,M as ol,N as nl,O as rl,P as il,Q as dl,R as we,S as ul,T as pl,U as pe,V as Ce,E as p,j as cl,I as V,H as ke,s as fl,W as ml,i as Ve}from"./index-Imyafj_c.js";const vl={class:"documents-container"},_l={class:"page-header"},gl={class:"header-actions"},yl={class:"stats-cards"},bl={class:"stat-card"},wl={class:"stat-content"},Cl={class:"stat-number"},kl={class:"stat-card"},Vl={class:"stat-content"},hl={class:"stat-number"},$l={class:"stat-card"},xl={class:"stat-content"},Ul={class:"stat-number"},Dl={class:"stat-card"},Fl={class:"stat-content"},Sl={class:"stat-number"},zl={class:"card-header"},Bl={class:"categories-grid"},Ll=["onClick"],Ml={class:"category-info"},jl={class:"category-name"},Rl={class:"category-count"},El={key:0},Al={class:"card-header"},Nl={class:"toolbar"},Tl={key:0,class:"folders-section"},Ol=["onDblclick"],Pl={class:"folder-name"},Wl={class:"folder-stats"},ql={class:"folder-actions"},Il={key:1,class:"documents-section"},Jl={class:"documents-header"},Kl={key:0,class:"batch-actions"},Gl={class:"selected-count"},Hl={class:"file-info"},Ql={class:"file-icon"},Xl={class:"file-name"},Yl={class:"dialog-footer"},Zl={key:0,class:"document-detail"},x="/documents",et={__name:"Documents",setup(lt){const H=cl(),he=ll(),U=f([]),N=f([]),M=f([]),_=f(null),y=f(null),j=f([]),T=f({total_documents:0,total_categories:0,total_size_human:"0 B",file_type_stats:{}}),O=f([]),$e=be(()=>O.value.some(n=>n.original_filename&&n.original_filename.toLowerCase().endsWith(".csv"))),Z=f(!1),ee=f(!1),le=f(!1),te=f(!1),ae=f(!1),se=f(!1),P=f(!1),W=f(!1),q=f(!1),I=f(!1),Q=f(!1),u=ie({title:"",description:"",file:null,tags:"",is_public:!1}),D=f([]),ce=f([]),oe=f(),xe={title:[{required:!0,message:"è¯·è¾“å…¥æ–‡æ¡£æ ‡é¢˜",trigger:"blur"}],file:[{required:!0,message:"è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶",trigger:"change"}]},w=ie({name:"",color:"#1890ff",description:""}),h=ie({name:"",description:""}),C=f(null),Ue=be(()=>{if(!_.value||!Array.isArray(U.value))return"";const n=U.value.find(e=>e&&e.id===_.value);return n?n.name:""}),ne=async()=>{var n,e,o;ee.value=!0;try{if(!he.isLoggedIn){p.warning("è¯·å…ˆç™»å½•"),H.push("/login");return}const t=await V.get(`${x}/categories/`);console.log("Categories response:",t.data),Array.isArray(t.data)?U.value=t.data:t.data&&Array.isArray(t.data.results)?U.value=t.data.results:(console.error("Unexpected categories data format:",t.data),U.value=[]),console.log("Parsed categories:",U.value)}catch(t){console.error("Load categories error:",t),p.error("åŠ è½½åˆ†ç±»å¤±è´¥: "+(((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.detail)||t.message)),((o=t.response)==null?void 0:o.status)===401&&H.push("/login"),U.value=[]}finally{ee.value=!1}},J=async()=>{var n;try{const e=await V.get(`${x}/stats/`);T.value=e.data}catch(e){console.error("Error fetching stats:",e),((n=e.response)==null?void 0:n.status)===401&&H.push("/login")}},De=async n=>{console.log("Selecting category:",n),_.value=n,y.value=null,j.value=[],await F()},F=async()=>{var n,e,o,t;Z.value=!0;try{let d=`${x}/categories/${_.value}/documents/`;y.value&&(d+=`?folder=${y.value}`),console.log("Loading category contents from:",d);const b=await V.get(d);console.log("Category contents response:",b.data),N.value=b.data.folders||[],M.value=b.data.documents||[],console.log("åŠ è½½çš„æ–‡æ¡£æ•°æ®:",M.value),console.log("æ–‡æ¡£æ•°é‡:",M.value.length)}catch(d){console.error("Load category contents error:",d),console.error("Error response:",d.response),p.error("åŠ è½½å†…å®¹å¤±è´¥: "+(((e=(n=d.response)==null?void 0:n.data)==null?void 0:e.detail)||((t=(o=d.response)==null?void 0:o.data)==null?void 0:t.error)||d.message))}finally{Z.value=!1}},Fe=()=>{y.value=null,j.value=[],F()},re=async(n,e=null)=>{if(e!==null)j.value=j.value.slice(0,e+1);else{const o=N.value.find(t=>t.id===n);o&&j.value.push({id:o.id,name:o.name})}y.value=n,await F()},Se=()=>{if(!_.value){p.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåˆ†ç±»");return}P.value=!0,u.title="",u.description="",u.file=null,u.tags="",u.is_public=!1,ce.value=[]},ze=()=>{if(!_.value){p.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåˆ†ç±»");return}W.value=!0,D.value=[]},Be=()=>{q.value=!0},Le=n=>{u.file=n.raw,u.title||(u.title=n.name.split(".")[0])},Me=(n,e)=>{D.value=e},je=(n,e)=>{D.value=e},Re=async()=>{oe.value&&await oe.value.validate(async n=>{var e,o;if(n){le.value=!0;try{const t=new FormData;t.append("file",u.file),t.append("title",u.title),t.append("description",u.description),t.append("tags",u.tags),t.append("is_public",u.is_public),t.append("category",_.value),y.value&&t.append("folder",y.value),console.log("Upload data:",{file:u.file.name,title:u.title,category:_.value,folder:y.value,tags:u.tags,is_public:u.is_public}),await V.post(`${x}/upload/`,t,{headers:{"Content-Type":"multipart/form-data"}}),p.success("æ–‡æ¡£ä¸Šä¼ æˆåŠŸ"),P.value=!1,await F(),await J()}catch(t){console.error("Upload error:",((e=t.response)==null?void 0:e.data)||t);let d="ä¸Šä¼ å¤±è´¥";(o=t.response)!=null&&o.data?t.response.data.errors?typeof t.response.data.errors=="object"?d=`ä¸Šä¼ å¤±è´¥: ${Object.values(t.response.data.errors).flat().join(", ")}`:d=`ä¸Šä¼ å¤±è´¥: ${t.response.data.errors}`:t.response.data.error?d=`ä¸Šä¼ å¤±è´¥: ${t.response.data.error}`:t.response.data.message?d=`ä¸Šä¼ å¤±è´¥: ${t.response.data.message}`:typeof t.response.data=="string"?d=`ä¸Šä¼ å¤±è´¥: ${t.response.data}`:d=`ä¸Šä¼ å¤±è´¥: ${JSON.stringify(t.response.data)}`:t.message?d=`ä¸Šä¼ å¤±è´¥: ${t.message}`:d="ä¸Šä¼ å¤±è´¥: æœªçŸ¥é”™è¯¯",p.error(d)}finally{le.value=!1}}})},Ee=async()=>{var n,e;if(D.value.length===0){p.warning("è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶");return}te.value=!0;try{const o=new FormData;D.value.forEach(d=>{o.append("files",d.raw)}),o.append("category",_.value),y.value&&o.append("folder",y.value),console.log("Batch upload data:",{filesCount:D.value.length,category:_.value,folder:y.value});const t=await V.post(`${x}/batch-upload/`,o,{headers:{"Content-Type":"multipart/form-data"}});p.success(t.data.message),W.value=!1,D.value=[],await F(),await J()}catch(o){console.error("Batch upload error:",((n=o.response)==null?void 0:n.data)||o);let t="æ‰¹é‡ä¸Šä¼ å¤±è´¥";(e=o.response)!=null&&e.data?o.response.data.errors?typeof o.response.data.errors=="object"?t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${Object.values(o.response.data.errors).flat().join(", ")}`:t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${o.response.data.errors}`:o.response.data.error?t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${o.response.data.error}`:o.response.data.message?t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${o.response.data.message}`:typeof o.response.data=="string"?t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${o.response.data}`:t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${JSON.stringify(o.response.data)}`:o.message?t=`æ‰¹é‡ä¸Šä¼ å¤±è´¥: ${o.message}`:t="æ‰¹é‡ä¸Šä¼ å¤±è´¥: æœªçŸ¥é”™è¯¯",p.error(t)}finally{te.value=!1}},Ae=async()=>{var n,e;if(!w.name){p.warning("è¯·è¾“å…¥åˆ†ç±»åç§°");return}ae.value=!0;try{const o=await V.post(`${x}/categories/`,w);console.log("Create category response:",o.data),p.success("åˆ›å»ºæˆåŠŸ"),q.value=!1,w.name="",w.color="#1890ff",w.description="",await ne(),await J(),console.log("Categories after reload:",U.value)}catch(o){console.error("Create category error:",o),p.error("åˆ›å»ºå¤±è´¥: "+(((e=(n=o.response)==null?void 0:n.data)==null?void 0:e.detail)||o.message))}finally{ae.value=!1}},fe=()=>{I.value=!0},Ne=async()=>{var n,e;if(!h.name){p.warning("è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°");return}se.value=!0;try{const o={name:h.name,description:h.description,category:_.value,parent:y.value};await V.post(`${x}/folders/`,o),p.success("æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ"),I.value=!1,h.name="",h.description="",await F()}catch(o){p.error("åˆ›å»ºå¤±è´¥: "+(((e=(n=o.response)==null?void 0:n.data)==null?void 0:e.detail)||o.message))}finally{se.value=!1}},Te=async n=>{var e,o;try{await ke.confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ–‡ä»¶å¤¹å—ï¼Ÿ","æç¤º",{type:"warning"}),await V.delete(`${x}/folders/${n}/`),p.success("åˆ é™¤æˆåŠŸ"),await F()}catch(t){t!=="cancel"&&p.error("åˆ é™¤å¤±è´¥: "+(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.error)||t.message))}},Oe=n=>{C.value=n,Q.value=!0},me=async n=>{var e,o;try{const t=await V.get(`${x}/${n}/download/`,{responseType:"blob"}),d=window.URL.createObjectURL(new Blob([t.data])),b=document.createElement("a");b.href=d;const X=t.headers["content-disposition"];let R="download";if(X){const K=X.match(/filename="?(.+)"?/);K&&(R=K[1])}b.setAttribute("download",R),document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(d),p.success("ä¸‹è½½æˆåŠŸ")}catch(t){p.error("ä¸‹è½½å¤±è´¥: "+(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.detail)||t.message))}},Pe=async n=>{var e,o;try{await ke.confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ–‡æ¡£å—ï¼Ÿ","æç¤º",{type:"warning"}),await V.delete(`${x}/${n}/delete/`),p.success("åˆ é™¤æˆåŠŸ"),await F(),await J()}catch(t){t!=="cancel"&&p.error("åˆ é™¤å¤±è´¥: "+(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.detail)||t.message))}},ve=n=>new Date(n).toLocaleString("zh-CN"),We=n=>{O.value=n},qe=n=>(console.log("isCSVFile æ£€æŸ¥è¡Œæ•°æ®:",n),console.log("åŽŸå§‹æ–‡ä»¶å:",n.original_filename),!0),Ie=async()=>{var e,o;const n=O.value.filter(t=>t.original_filename&&t.original_filename.toLowerCase().endsWith(".csv"));if(n.length===0){p.warning("è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªCSVæ–‡ä»¶");return}try{p({type:"info",message:`æ­£åœ¨å¤„ç† ${n.length} ä¸ªCSVæ–‡ä»¶...`,duration:2e3});const t=await V.post("/kg/process-csv-documents/",{document_ids:n.map(d=>d.id)});p.success(`æˆåŠŸå¤„ç† ${n.length} ä¸ªCSVæ–‡ä»¶ï¼Œå·²è½¬æ¢ä¸ºçŸ¥è¯†å›¾è°±æ•°æ®`),H.push("/knowledge-graph")}catch(t){console.error("Transfer to knowledge graph error:",t),p.error("å¤„ç†CSVæ–‡ä»¶å¤±è´¥: "+(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.detail)||t.message))}};return tl(async()=>{await ne(),await J()}),(n,e)=>{var ye;const o=m("el-icon"),t=m("el-button"),d=m("el-col"),b=m("el-row"),X=m("el-scrollbar"),R=m("el-card"),K=m("el-breadcrumb-item"),Je=m("el-breadcrumb"),Ke=m("el-divider"),E=m("el-table-column"),Ge=m("el-table"),He=m("el-empty"),_e=m("el-upload"),k=m("el-form-item"),B=m("el-input"),ge=m("el-radio"),Qe=m("el-radio-group"),Y=m("el-form"),G=m("el-dialog"),Xe=m("el-color-picker"),A=m("el-descriptions-item"),Ye=m("el-descriptions"),Ze=rl("loading");return v(),$("div",vl,[r("div",_l,[e[21]||(e[21]=r("div",{class:"header-content"},[r("h1",null,"ðŸ“š æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ"),r("p",null,"æ”¯æŒåˆ†ç±»ã€æ–‡ä»¶å¤¹ç®¡ç†å’Œæ‰¹é‡ä¸Šä¼ ")],-1)),r("div",gl,[l(t,{type:"primary",onClick:Be},{default:a(()=>[l(o,null,{default:a(()=>[l(g(sl))]),_:1}),e[20]||(e[20]=i(" æ–°å»ºåˆ†ç±» ",-1))]),_:1})])]),r("div",yl,[l(b,{gutter:20},{default:a(()=>[l(d,{span:6},{default:a(()=>[r("div",bl,[e[23]||(e[23]=r("div",{class:"stat-icon documents"},"ðŸ“š",-1)),r("div",wl,[r("div",Cl,c(T.value.total_documents),1),e[22]||(e[22]=r("div",{class:"stat-label"},"æ–‡æ¡£æ€»æ•°",-1))])])]),_:1}),l(d,{span:6},{default:a(()=>[r("div",kl,[e[25]||(e[25]=r("div",{class:"stat-icon categories"},"ðŸ—‚ï¸",-1)),r("div",Vl,[r("div",hl,c(T.value.total_categories),1),e[24]||(e[24]=r("div",{class:"stat-label"},"åˆ†ç±»æ•°é‡",-1))])])]),_:1}),l(d,{span:6},{default:a(()=>[r("div",$l,[e[27]||(e[27]=r("div",{class:"stat-icon size"},"ðŸ’¾",-1)),r("div",xl,[r("div",Ul,c(T.value.total_size_human),1),e[26]||(e[26]=r("div",{class:"stat-label"},"æ€»å­˜å‚¨",-1))])])]),_:1}),l(d,{span:6},{default:a(()=>[r("div",Dl,[e[29]||(e[29]=r("div",{class:"stat-icon types"},"ðŸŽ¯",-1)),r("div",Fl,[r("div",Sl,c(Object.keys(T.value.file_type_stats||{}).length),1),e[28]||(e[28]=r("div",{class:"stat-label"},"æ–‡ä»¶ç±»åž‹",-1))])])]),_:1})]),_:1})]),l(R,{class:"category-section",shadow:"hover"},{header:a(()=>[r("div",zl,[e[31]||(e[31]=r("span",null,"ðŸ“ æ–‡æ¡£åˆ†ç±»",-1)),l(t,{type:"text",onClick:ne,loading:ee.value},{default:a(()=>[l(o,null,{default:a(()=>[l(g(ol))]),_:1}),e[30]||(e[30]=i(" åˆ·æ–° ",-1))]),_:1},8,["loading"])])]),default:a(()=>[l(X,{height:"150px"},{default:a(()=>[r("div",Bl,[(v(!0),$(de,null,ue(U.value,s=>(v(),$("div",{key:(s==null?void 0:s.id)||Math.random(),class:fl(["category-item",{active:s&&_.value===s.id}]),onClick:S=>s&&De(s.id)},[r("div",{class:"category-color",style:ml({backgroundColor:(s==null?void 0:s.color)||"#999"})},null,4),r("div",Ml,[r("div",jl,c((s==null?void 0:s.name)||"æœªçŸ¥åˆ†ç±»"),1),r("div",Rl,[i(c((s==null?void 0:s.document_count)||0)+" æ–‡æ¡£ ",1),s!=null&&s.folder_count?(v(),$("span",El," Â· "+c(s.folder_count)+" æ–‡ä»¶å¤¹",1)):z("",!0)])])],10,Ll))),128))])]),_:1})]),_:1}),_.value?(v(),L(R,{key:0,class:"path-breadcrumb",shadow:"never"},{default:a(()=>[l(Je,{separator:"/"},{default:a(()=>[l(K,{onClick:Fe},{default:a(()=>[l(o,null,{default:a(()=>[l(g(nl))]),_:1}),i(" "+c(Ue.value),1)]),_:1}),(v(!0),$(de,null,ue(j.value,(s,S)=>(v(),L(K,{key:s.id,onClick:tt=>re(s.id,S)},{default:a(()=>[i(c(s.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):z("",!0),_.value?al((v(),L(R,{key:1},{header:a(()=>[r("div",Al,[e[36]||(e[36]=r("span",null,"ðŸ“‚ æ–‡ä»¶å¤¹åˆ—è¡¨",-1)),r("div",Nl,[l(t,{type:"primary",size:"small",onClick:Se},{default:a(()=>[l(o,null,{default:a(()=>[l(g(pl))]),_:1}),e[32]||(e[32]=i(" ä¸Šä¼ æ–‡æ¡£ ",-1))]),_:1}),l(t,{type:"success",size:"small",onClick:ze},{default:a(()=>[l(o,null,{default:a(()=>[l(g(pe))]),_:1}),e[33]||(e[33]=i(" æ‰¹é‡ä¸Šä¼  ",-1))]),_:1}),y.value?(v(),L(t,{key:0,size:"small",onClick:fe},{default:a(()=>[l(o,null,{default:a(()=>[l(g(pe))]),_:1}),e[34]||(e[34]=i(" æ–°å»ºå­æ–‡ä»¶å¤¹ ",-1))]),_:1})):(v(),L(t,{key:1,size:"small",onClick:fe},{default:a(()=>[l(o,null,{default:a(()=>[l(g(pe))]),_:1}),e[35]||(e[35]=i(" æ–°å»ºæ–‡ä»¶å¤¹ ",-1))]),_:1}))])])]),default:a(()=>[N.value.length>0?(v(),$("div",Tl,[e[40]||(e[40]=r("h4",null,"ðŸ“ æ–‡ä»¶å¤¹",-1)),l(b,{gutter:20},{default:a(()=>[(v(!0),$(de,null,ue(N.value,s=>(v(),L(d,{key:"folder-"+s.id,span:6},{default:a(()=>[r("div",{class:"folder-card",onDblclick:S=>re(s.id)},[e[39]||(e[39]=r("div",{class:"folder-icon"},"ðŸ“",-1)),r("div",Pl,c(s.name),1),r("div",Wl,c(s.document_count)+" ä¸ªæ–‡ä»¶",1),r("div",ql,[l(t,{type:"primary",text:"",size:"small",onClick:Ve(S=>re(s.id),["stop"])},{default:a(()=>[...e[37]||(e[37]=[i(" æ‰“å¼€ ",-1)])]),_:1},8,["onClick"]),l(t,{type:"danger",text:"",size:"small",onClick:Ve(S=>Te(s.id),["stop"])},{default:a(()=>[...e[38]||(e[38]=[i(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])])],40,Ol)]),_:2},1024))),128))]),_:1}),l(Ke)])):z("",!0),M.value.length>0?(v(),$("div",Il,[r("div",Jl,[e[42]||(e[42]=r("h4",null,"ðŸ“„ æ–‡æ¡£",-1)),O.value.length>0?(v(),$("div",Kl,[r("span",Gl,"å·²é€‰æ‹© "+c(O.value.length)+" ä¸ªCSVæ–‡ä»¶",1),l(t,{type:"success",size:"small",onClick:Ie,disabled:!$e.value},{default:a(()=>[l(o,null,{default:a(()=>[l(g(il))]),_:1}),e[41]||(e[41]=i(" è½¬åˆ°çŸ¥è¯†å›¾è°± ",-1))]),_:1},8,["disabled"])])):z("",!0)]),l(Ge,{data:M.value,stripe:"","row-key":"id",onSelectionChange:We},{default:a(()=>[l(E,{type:"selection",width:"55",selectable:qe,"reserve-selection":""}),l(E,{label:"æ–‡ä»¶å","min-width":"200"},{default:a(({row:s})=>[r("div",Hl,[r("span",Ql,c(s.file_type_icon),1),r("span",Xl,c(s.original_filename||s.title),1)])]),_:1}),l(E,{label:"å¤§å°",width:"100"},{default:a(({row:s})=>[i(c(s.file_size_human),1)]),_:1}),l(E,{label:"ä¸Šä¼ è€…",width:"120"},{default:a(({row:s})=>[i(c(s.uploaded_by_name),1)]),_:1}),l(E,{label:"ä¸Šä¼ æ—¶é—´",width:"180"},{default:a(({row:s})=>[i(c(ve(s.created_at)),1)]),_:1}),l(E,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:a(({row:s})=>[l(t,{type:"primary",text:"",size:"small",onClick:S=>Oe(s)},{default:a(()=>[l(o,null,{default:a(()=>[l(g(dl))]),_:1}),e[43]||(e[43]=i(" æŸ¥çœ‹ ",-1))]),_:1},8,["onClick"]),l(t,{type:"success",text:"",size:"small",onClick:S=>me(s.id)},{default:a(()=>[l(o,null,{default:a(()=>[l(g(we))]),_:1}),e[44]||(e[44]=i(" ä¸‹è½½ ",-1))]),_:1},8,["onClick"]),l(t,{type:"danger",text:"",size:"small",onClick:S=>Pe(s.id)},{default:a(()=>[l(o,null,{default:a(()=>[l(g(ul))]),_:1}),e[45]||(e[45]=i(" åˆ é™¤ ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):z("",!0),N.value.length===0&&M.value.length===0?(v(),L(He,{key:2,description:"æš‚æ— æ•°æ®"})):z("",!0)]),_:1})),[[Ze,Z.value]]):z("",!0),l(G,{modelValue:P.value,"onUpdate:modelValue":e[5]||(e[5]=s=>P.value=s),title:"ä¸Šä¼ æ–‡æ¡£",width:"600px"},{footer:a(()=>[r("span",Yl,[l(t,{onClick:e[4]||(e[4]=s=>P.value=!1)},{default:a(()=>[...e[50]||(e[50]=[i("å–æ¶ˆ",-1)])]),_:1}),l(t,{type:"primary",onClick:Re,loading:le.value},{default:a(()=>[...e[51]||(e[51]=[i(" ä¸Šä¼  ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[l(Y,{model:u,rules:xe,ref_key:"uploadFormRef",ref:oe,"label-width":"100px"},{default:a(()=>[l(k,{label:"é€‰æ‹©æ–‡ä»¶",prop:"file"},{default:a(()=>[l(_e,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":Le,"file-list":ce.value,limit:1,accept:".pdf,.doc,.docx,.txt,.md,.ppt,.pptx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.bmp"},{tip:a(()=>[...e[46]||(e[46]=[r("div",{class:"el-upload__tip"}," æ”¯æŒ PDFã€Wordã€Excelã€PowerPointã€å›¾ç‰‡ç­‰æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡50MB ",-1)])]),default:a(()=>[l(o,{class:"el-icon--upload"},{default:a(()=>[l(g(Ce))]),_:1}),e[47]||(e[47]=r("div",{class:"el-upload__text"},[i(" å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),r("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"])]),_:1}),l(k,{label:"æ–‡æ¡£æ ‡é¢˜",prop:"title"},{default:a(()=>[l(B,{modelValue:u.title,"onUpdate:modelValue":e[0]||(e[0]=s=>u.title=s),placeholder:"è¯·è¾“å…¥æ–‡æ¡£æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),l(k,{label:"æ–‡æ¡£æè¿°"},{default:a(()=>[l(B,{modelValue:u.description,"onUpdate:modelValue":e[1]||(e[1]=s=>u.description=s),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ–‡æ¡£æè¿°ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),l(k,{label:"æ ‡ç­¾"},{default:a(()=>[l(B,{modelValue:u.tags,"onUpdate:modelValue":e[2]||(e[2]=s=>u.tags=s),placeholder:"è¯·è¾“å…¥æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),l(k,{label:"æƒé™è®¾ç½®"},{default:a(()=>[l(Qe,{modelValue:u.is_public,"onUpdate:modelValue":e[3]||(e[3]=s=>u.is_public=s)},{default:a(()=>[l(ge,{value:!1},{default:a(()=>[...e[48]||(e[48]=[i("ç§æœ‰",-1)])]),_:1}),l(ge,{value:!0},{default:a(()=>[...e[49]||(e[49]=[i("å…¬å¼€",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(G,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=s=>W.value=s),title:"æ‰¹é‡ä¸Šä¼ æ–‡æ¡£",width:"600px"},{footer:a(()=>[l(t,{onClick:e[6]||(e[6]=s=>W.value=!1)},{default:a(()=>[...e[54]||(e[54]=[i("å–æ¶ˆ",-1)])]),_:1}),l(t,{type:"primary",onClick:Ee,loading:te.value},{default:a(()=>[i(" ä¸Šä¼  "+c(D.value.length)+" ä¸ªæ–‡ä»¶ ",1)]),_:1},8,["loading"])]),default:a(()=>[l(Y,{"label-width":"100px"},{default:a(()=>[l(k,{label:"é€‰æ‹©æ–‡ä»¶"},{default:a(()=>[l(_e,{class:"upload-demo",drag:"","auto-upload":!1,multiple:"","file-list":D.value,"on-change":Me,"on-remove":je,accept:".pdf,.doc,.docx,.txt,.md,.ppt,.pptx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.bmp"},{tip:a(()=>[...e[52]||(e[52]=[r("div",{class:"el-upload__tip"}," æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡50MB ",-1)])]),default:a(()=>[l(o,{class:"el-icon--upload"},{default:a(()=>[l(g(Ce))]),_:1}),e[53]||(e[53]=r("div",{class:"el-upload__text"},[i(" å°†å¤šä¸ªæ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),r("em",null,"ç‚¹å‡»é€‰æ‹©")],-1))]),_:1},8,["file-list"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(G,{modelValue:q.value,"onUpdate:modelValue":e[12]||(e[12]=s=>q.value=s),title:"æ–°å»ºåˆ†ç±»",width:"500px"},{footer:a(()=>[l(t,{onClick:e[11]||(e[11]=s=>q.value=!1)},{default:a(()=>[...e[55]||(e[55]=[i("å–æ¶ˆ",-1)])]),_:1}),l(t,{type:"primary",onClick:Ae,loading:ae.value},{default:a(()=>[...e[56]||(e[56]=[i(" åˆ›å»º ",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(Y,{model:w,"label-width":"100px"},{default:a(()=>[l(k,{label:"åˆ†ç±»åç§°"},{default:a(()=>[l(B,{modelValue:w.name,"onUpdate:modelValue":e[8]||(e[8]=s=>w.name=s),placeholder:"è¯·è¾“å…¥åˆ†ç±»åç§°"},null,8,["modelValue"])]),_:1}),l(k,{label:"åˆ†ç±»é¢œè‰²"},{default:a(()=>[l(Xe,{modelValue:w.color,"onUpdate:modelValue":e[9]||(e[9]=s=>w.color=s)},null,8,["modelValue"])]),_:1}),l(k,{label:"æè¿°"},{default:a(()=>[l(B,{modelValue:w.description,"onUpdate:modelValue":e[10]||(e[10]=s=>w.description=s),type:"textarea",rows:3,placeholder:"åˆ†ç±»æè¿°"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(G,{modelValue:I.value,"onUpdate:modelValue":e[16]||(e[16]=s=>I.value=s),title:"æ–°å»ºæ–‡ä»¶å¤¹",width:"500px"},{footer:a(()=>[l(t,{onClick:e[15]||(e[15]=s=>I.value=!1)},{default:a(()=>[...e[57]||(e[57]=[i("å–æ¶ˆ",-1)])]),_:1}),l(t,{type:"primary",onClick:Ne,loading:se.value},{default:a(()=>[...e[58]||(e[58]=[i(" åˆ›å»º ",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(Y,{model:h,"label-width":"100px"},{default:a(()=>[l(k,{label:"æ–‡ä»¶å¤¹åç§°"},{default:a(()=>[l(B,{modelValue:h.name,"onUpdate:modelValue":e[13]||(e[13]=s=>h.name=s),placeholder:"è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°"},null,8,["modelValue"])]),_:1}),l(k,{label:"æè¿°"},{default:a(()=>[l(B,{modelValue:h.description,"onUpdate:modelValue":e[14]||(e[14]=s=>h.description=s),type:"textarea",rows:3,placeholder:"æ–‡ä»¶å¤¹æè¿°ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(G,{modelValue:Q.value,"onUpdate:modelValue":e[19]||(e[19]=s=>Q.value=s),title:(ye=C.value)==null?void 0:ye.title,width:"800px"},{footer:a(()=>[l(t,{onClick:e[17]||(e[17]=s=>Q.value=!1)},{default:a(()=>[...e[59]||(e[59]=[i("å…³é—­",-1)])]),_:1}),l(t,{type:"primary",onClick:e[18]||(e[18]=s=>me(C.value.id))},{default:a(()=>[l(o,null,{default:a(()=>[l(g(we))]),_:1}),e[60]||(e[60]=i(" ä¸‹è½½ ",-1))]),_:1})]),default:a(()=>[C.value?(v(),$("div",Zl,[l(Ye,{column:2,border:""},{default:a(()=>[l(A,{label:"æ–‡ä»¶å"},{default:a(()=>[i(c(C.value.original_filename),1)]),_:1}),l(A,{label:"æ–‡ä»¶å¤§å°"},{default:a(()=>[i(c(C.value.file_size_human),1)]),_:1}),l(A,{label:"æ–‡ä»¶ç±»åž‹"},{default:a(()=>[i(c(C.value.file_type_icon)+" "+c(C.value.file_type),1)]),_:1}),l(A,{label:"ä¸Šä¼ è€…"},{default:a(()=>[i(c(C.value.uploaded_by_name),1)]),_:1}),l(A,{label:"ä¸Šä¼ æ—¶é—´",span:2},{default:a(()=>[i(c(ve(C.value.created_at)),1)]),_:1}),l(A,{label:"æè¿°",span:2},{default:a(()=>[i(c(C.value.description||"æ— "),1)]),_:1})]),_:1})])):z("",!0)]),_:1},8,["modelValue","title"])])}}},st=el(et,[["__scopeId","data-v-75d48579"]]);export{st as default};
