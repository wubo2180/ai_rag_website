import{_ as E,u as R,r as g,a as h,c as k,o as z,b as u,d as s,w as l,e as C,f as n,g as U,h as d,i as $,m as j,l as _,j as w,E as m}from"./index-Bn8zWV3R.js";const q={class:"register-container"},B={class:"register-form"},N={class:"register-footer"},S={__name:"Register",setup(A){const v=U(),V=R(),p=g(),f=g(!1),r=h({username:"",email:"",password:"",confirmPassword:""}),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:30,message:"用户名长度在 3 到 30 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{validator:(a,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},c=async()=>{if(p.value)try{await p.value.validate(),f.value=!0;const a=await V.register({username:r.username,email:r.email,password:r.password,confirm_password:r.confirmPassword});a.success?(m.success("注册成功"),v.push("/chat")):typeof a.error=="object"?Object.entries(a.error).forEach(([e,o])=>{Array.isArray(o)?o.forEach(t=>m.error(`${e}: ${t}`)):m.error(`${e}: ${o}`)}):m.error(a.error)}catch(a){console.error("注册表单验证失败:",a)}finally{f.value=!1}};return(a,e)=>{const o=n("el-input"),t=n("el-form-item"),y=n("el-button"),b=n("el-form"),P=n("router-link");return z(),k("div",q,[u("div",B,[e[7]||(e[7]=u("h2",null,"注册",-1)),s(b,{model:r,rules:x,ref_key:"formRef",ref:p,onSubmit:C(c,["prevent"])},{default:l(()=>[s(t,{prop:"username"},{default:l(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=i=>r.username=i),placeholder:"用户名",size:"large","prefix-icon":d($)},null,8,["modelValue","prefix-icon"])]),_:1}),s(t,{prop:"email"},{default:l(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=i=>r.email=i),placeholder:"邮箱",size:"large","prefix-icon":d(j)},null,8,["modelValue","prefix-icon"])]),_:1}),s(t,{prop:"password"},{default:l(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=i=>r.password=i),type:"password",placeholder:"密码",size:"large","prefix-icon":d(_),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(t,{prop:"confirmPassword"},{default:l(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=i=>r.confirmPassword=i),type:"password",placeholder:"确认密码",size:"large","prefix-icon":d(_),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(t,null,{default:l(()=>[s(y,{type:"primary",size:"large",style:{width:"100%"},loading:f.value,onClick:c},{default:l(()=>[...e[4]||(e[4]=[w(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),u("div",N,[e[6]||(e[6]=u("span",null,"已有账户？",-1)),s(P,{to:"/login"},{default:l(()=>[...e[5]||(e[5]=[w("立即登录",-1)])]),_:1})])])])}}},O=E(S,[["__scopeId","data-v-d928e547"]]);export{O as default};
