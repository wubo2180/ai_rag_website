[uwsgi]
# Django项目配置
module = config.wsgi:application
master = true
processes = 4
threads = 2
max-requests = 1000
buffer-size = 32768

# 网络配置
http = :8000
# 如果使用nginx反向代理，使用socket而不是http
# socket = 127.0.0.1:8001

# 项目路径设置
chdir = /www/wwwroot/ai_rag_website/backend
home = /www/server/pyporject_evn/versions/3.13.7
pythonpath = /www/wwwroot/ai_rag_website/backend

# 环境变量
env = DJANGO_SETTINGS_MODULE=config.settings
env = PYTHONPATH=/www/wwwroot/ai_rag_website/backend

# 确保模块可以被找到
wsgi-file = /www/wwwroot/ai_rag_website/backend/config/wsgi.py

# 日志配置
logto = /www/wwwroot/ai_rag_website/backend/logs/uwsgi.log
log-maxsize = 10000000
log-backupcount = 5

# 性能优化
vacuum = true
die-on-term = true
lazy-apps = true
single-interpreter = true

# 静态文件
static-map = /static=/www/wwwroot/ai_rag_website/backend/staticfiles
static-map = /media=/www/wwwroot/ai_rag_website/backend/media

# 安全配置
uid = www-data
gid = www-data
chmod-socket = 666

# 开发环境配置（生产环境请删除）
py-autoreload = 1