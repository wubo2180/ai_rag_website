<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownæ ¼å¼æµ‹è¯•</title>
    <!-- Markdownæ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <!-- ä»£ç é«˜äº®åº“ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <!-- DOMPurify -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .message-content {
            background: #f1f3f4;
            color: #333;
            padding: 20px;
            border-radius: 12px;
        }
        
        /* å¤åˆ¶chaté¡µé¢çš„æ‰€æœ‰AIæ¶ˆæ¯æ ·å¼ */
        .message-content p {
            margin: 0.5em 0;
            line-height: 1.6;
        }
        
        .message-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
            font-size: 0.9em;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .message-content table thead tr {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: left;
            font-weight: 600;
        }
        
        .message-content table th,
        .message-content table td {
            padding: 12px 15px;
            border: 1px solid #ddd;
        }
        
        .message-content table tbody tr:nth-of-type(even) {
            background-color: #f8f9fa;
        }
        
        .message-content table tbody tr:hover {
            background-color: #e9ecef;
        }
        
        .message-content pre {
            background: #282c34;
            color: #abb2bf;
            padding: 1em;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1em 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .message-content pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: 0.9em;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .message-content code {
            background: #f4f4f4;
            color: #e83e8c;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .message-content h1,
        .message-content h2,
        .message-content h3 {
            margin: 1em 0 0.5em 0;
            font-weight: 600;
        }
        
        .message-content h1 { font-size: 1.5em; border-bottom: 2px solid #ddd; padding-bottom: 0.3em; }
        .message-content h2 { font-size: 1.3em; border-bottom: 1px solid #eee; padding-bottom: 0.2em; }
        
        .message-content blockquote {
            border-left: 4px solid #007bff;
            background: #f8f9fa;
            margin: 1em 0;
            padding: 0.5em 1em;
            font-style: italic;
            color: #555;
        }
        
        .message-content ul,
        .message-content ol {
            margin: 0.5em 0;
            padding-left: 2em;
        }
        
        .message-content li {
            margin: 0.3em 0;
            line-height: 1.6;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; color: #333;">ğŸ¨ Markdownæ ¼å¼åŒ–æµ‹è¯•é¡µé¢</h1>
    
    <div class="demo-container">
        <h2>æµ‹è¯•æ ·æœ¬</h2>
        <button class="test-button" onclick="testTable()">æµ‹è¯•è¡¨æ ¼</button>
        <button class="test-button" onclick="testCode()">æµ‹è¯•ä»£ç </button>
        <button class="test-button" onclick="testMixed()">æµ‹è¯•æ··åˆæ ¼å¼</button>
        <button class="test-button" onclick="testAll()">å®Œæ•´ç¤ºä¾‹</button>
    </div>
    
    <div class="demo-container">
        <h2>æ¸²æŸ“ç»“æœ</h2>
        <div id="output" class="message-content">
            ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹æ•ˆæœ...
        </div>
    </div>

    <script>
        // é…ç½®marked
        marked.setOptions({
            breaks: true,
            gfm: true,
            tables: true,
            highlight: function(code, lang) {
                if (lang && hljs.getLanguage(lang)) {
                    try {
                        return hljs.highlight(code, { language: lang }).value;
                    } catch (err) {}
                }
                return hljs.highlightAuto(code).value;
            }
        });

        function render(markdown) {
            const output = document.getElementById('output');
            const rawHtml = marked.parse(markdown);
            const cleanHtml = DOMPurify.sanitize(rawHtml);
            output.innerHTML = cleanHtml;
            
            // é«˜äº®ä»£ç 
            output.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        }

        function testTable() {
            const markdown = `
## ğŸ“Š AIæ¨¡å‹å¯¹æ¯”è¡¨

| æ¨¡å‹åç§° | æä¾›å•† | å‚æ•°è§„æ¨¡ | ç‰¹ç‚¹ | ä»·æ ¼ |
|---------|--------|---------|------|------|
| GPT-5 | OpenAI | 1.76T | å¼ºå¤§çš„é€šç”¨èƒ½åŠ› | $$$ |
| Claude4 | Anthropic | 500B | é•¿æ–‡æœ¬å¤„ç†ä¼˜ç§€ | $$ |
| é€šä¹‰åƒé—® | é˜¿é‡Œäº‘ | 72B | ä¸­æ–‡ç†è§£å¼º | $ |
| Gemini2.5 | Google | 1.2T | å¤šæ¨¡æ€èƒ½åŠ› | $$$ |
| Llama4 | Meta | 405B | å¼€æºå…è´¹ | å…è´¹ |

### è¯´æ˜
- ä»·æ ¼è¶Šå¤šè¡¨ç¤ºè¶Šè´µ
- å‚æ•°è§„æ¨¡ï¼šB=åäº¿ï¼ŒT=ä¸‡äº¿
            `;
            render(markdown);
        }

        function testCode() {
            const markdown = `
## ğŸ’» ä»£ç ç¤ºä¾‹

### Pythonå¿«é€Ÿæ’åº

\`\`\`python
def quicksort(arr):
    if len(arr) <= 1:
        return arr
    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]
    return quicksort(left) + middle + quicksort(right)

# æµ‹è¯•
numbers = [3, 6, 8, 10, 1, 2, 1]
print(quicksort(numbers))
\`\`\`

### JavaScriptå¼‚æ­¥å‡½æ•°

\`\`\`javascript
async function fetchData(url) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        console.log('Data:', data);
        return data;
    } catch (error) {
        console.error('Error:', error);
    }
}
\`\`\`

### SQLæŸ¥è¯¢

\`\`\`sql
SELECT 
    u.name,
    COUNT(o.id) as order_count,
    SUM(o.total) as total_spent
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
WHERE o.created_at > '2025-01-01'
GROUP BY u.id
ORDER BY total_spent DESC
LIMIT 10;
\`\`\`
            `;
            render(markdown);
        }

        function testMixed() {
            const markdown = `
# ğŸ“ æ··åˆæ ¼å¼æµ‹è¯•

## æ–‡æœ¬å¼ºè°ƒ

è¿™æ˜¯**ç²—ä½“æ–‡å­—**ï¼Œè¿™æ˜¯*æ–œä½“æ–‡å­—*ï¼Œè¿™æ˜¯\`è¡Œå†…ä»£ç \`ã€‚

## åˆ—è¡¨

### å¾…åŠäº‹é¡¹
1. å®ŒæˆMarkdownæ¸²æŸ“ âœ…
2. æ·»åŠ ä»£ç é«˜äº® âœ…
3. ä¼˜åŒ–è¡¨æ ¼æ ·å¼ âœ…
4. æµ‹è¯•å„ç§æ ¼å¼ ğŸ”„

### åŠŸèƒ½ç‰¹æ€§
- âœ¨ ç¾è§‚çš„è¡¨æ ¼
- ğŸ¨ ä»£ç é«˜äº®
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ”’ XSSé˜²æŠ¤

## å¼•ç”¨å—

> "ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿è®©è®¡ç®—æœºæ‰§è¡Œã€‚"
> 
> â€”â€” è®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š

## åˆ†å‰²çº¿

---

## é“¾æ¥æµ‹è¯•

è®¿é—® [GitHub](https://github.com) æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚
            `;
            render(markdown);
        }

        function testAll() {
            const markdown = `
# ğŸ¯ å®Œæ•´åŠŸèƒ½æ¼”ç¤º

## 1. æ•°æ®åˆ†ææŠ¥å‘Š

ä»¥ä¸‹æ˜¯2025å¹´ç¬¬ä¸€å­£åº¦çš„é”€å”®æ•°æ®åˆ†æï¼š

| æœˆä»½ | é”€å”®é¢(ä¸‡å…ƒ) | è®¢å•æ•° | å®¢å•ä»· | å¢é•¿ç‡ |
|-----|------------|--------|--------|--------|
| 1æœˆ | 150 | 1200 | 1250 | - |
| 2æœˆ | 180 | 1350 | 1333 | +20% |
| 3æœˆ | 225 | 1500 | 1500 | +25% |
| **æ€»è®¡** | **555** | **4050** | **1370** | **+50%** |

## 2. å…³é”®å‘ç°

### ğŸ“ˆ æ­£é¢è¶‹åŠ¿
1. **é”€å”®é¢æŒç»­å¢é•¿** - ç¯æ¯”å¢é•¿ç‡ä¿æŒåœ¨20%ä»¥ä¸Š
2. **å®¢å•ä»·æå‡** - ä»1250å…ƒå¢é•¿åˆ°1500å…ƒ
3. **è®¢å•é‡ç¨³å®š** - æœˆå‡å¢é•¿12.5%

### âš ï¸ éœ€è¦å…³æ³¨
- 2æœˆå¢é•¿ç•¥æœ‰æ”¾ç¼“
- éœ€è¦ç»´æŒ3æœˆçš„å¢é•¿åŠ¿å¤´
- å®¢æˆ·ç•™å­˜ç‡éœ€è¿›ä¸€æ­¥ä¼˜åŒ–

## 3. æŠ€æœ¯å®ç°

### æ•°æ®å¤„ç†ä»£ç 

\`\`\`python
import pandas as pd
import matplotlib.pyplot as plt

# è¯»å–æ•°æ®
data = {
    'æœˆä»½': ['1æœˆ', '2æœˆ', '3æœˆ'],
    'é”€å”®é¢': [150, 180, 225],
    'è®¢å•æ•°': [1200, 1350, 1500]
}

df = pd.DataFrame(data)

# è®¡ç®—å¢é•¿ç‡
df['å¢é•¿ç‡'] = df['é”€å”®é¢'].pct_change() * 100

# å¯è§†åŒ–
plt.figure(figsize=(10, 6))
plt.plot(df['æœˆä»½'], df['é”€å”®é¢'], marker='o')
plt.title('Q1é”€å”®è¶‹åŠ¿')
plt.xlabel('æœˆä»½')
plt.ylabel('é”€å”®é¢(ä¸‡å…ƒ)')
plt.grid(True)
plt.show()
\`\`\`

## 4. å»ºè®®æªæ–½

### çŸ­æœŸè¡ŒåŠ¨(1-2å‘¨)
- [ ] ä¼˜åŒ–è¥é”€ç­–ç•¥
- [ ] æå‡å®¢æˆ·æœåŠ¡è´¨é‡
- [ ] å¢åŠ äº§å“ä¿ƒé”€æ´»åŠ¨

### ä¸­æœŸè§„åˆ’(1-3ä¸ªæœˆ)
> ğŸ’¡ **é‡ç‚¹**: å»ºç«‹å®¢æˆ·å¿ è¯šåº¦è®¡åˆ’
> - ä¼šå‘˜ç§¯åˆ†ç³»ç»Ÿ
> - ä¸ªæ€§åŒ–æ¨è
> - å”®åæœåŠ¡ä¼˜åŒ–

### é•¿æœŸç›®æ ‡
å»ºç«‹å®Œå–„çš„æ•°æ®åˆ†æä½“ç³»ï¼Œå®ç°ï¼š
1. å®æ—¶æ•°æ®ç›‘æ§
2. é¢„æµ‹æ€§åˆ†æ
3. è‡ªåŠ¨åŒ–æŠ¥å‘Š

---

## æ€»ç»“

é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸šåŠ¡å‘å±•æ€åŠ¿è‰¯å¥½ã€‚ç»§ç»­ä¿æŒå½“å‰ç­–ç•¥ï¼ŒåŒæ—¶å…³æ³¨å®¢æˆ·ä½“éªŒä¼˜åŒ–ï¼Œé¢„è®¡Q2å¯ä»¥å®ç°**æ›´å¥½çš„ä¸šç»©è¡¨ç°**ï¼

\`æœ€åæ›´æ–°: 2025-10-12\`
            `;
            render(markdown);
        }

        // é»˜è®¤æ˜¾ç¤ºå®Œæ•´ç¤ºä¾‹
        testAll();
    </script>
</body>
</html>
