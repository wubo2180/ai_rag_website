# AI RAG æ™ºèƒ½é—®ç­”ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºDjangoåç«¯å’ŒVue.jså‰ç«¯çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒæ–‡æ¡£ç®¡ç†ã€èŠå¤©å¯¹è¯å’ŒAIæ¨¡å‹é›†æˆã€‚

## ç³»ç»Ÿæ¶æ„

- **åç«¯**: Django 5.2.7 + Django REST Framework
- **å‰ç«¯**: Vue.js 3 + Element Plus + Vite
- **æ•°æ®åº“**: SQLite (å¼€å‘ç¯å¢ƒ)
- **AIæœåŠ¡**: é›†æˆDify APIï¼Œæ”¯æŒå¤šç§AIæ¨¡å‹

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– æ™ºèƒ½èŠå¤©å¯¹è¯
- ğŸ“„ æ–‡æ¡£ä¸Šä¼ ä¸ç®¡ç† 
- ğŸ‘¤ ç”¨æˆ·è®¤è¯ä¸ä¼šè¯ç®¡ç†
- ğŸ” æ–‡æ¡£æœç´¢ä¸åˆ†ç±»
- ğŸ“± å“åº”å¼ç°ä»£åŒ–UIç•Œé¢
- ğŸ”— RESTful APIæ¥å£

## æœ¬åœ°å¯åŠ¨è¯´æ˜

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®

```bash
git clone [é¡¹ç›®åœ°å€]
cd ai_rag_website
```

### 2. åç«¯å¯åŠ¨

#### 2.1 è¿›å…¥åç«¯ç›®å½•
```bash
cd backend
```

#### 2.2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

#### 2.3 å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

#### 2.4 æ•°æ®åº“åˆå§‹åŒ–
```bash
python manage.py makemigrations
python manage.py migrate
```

#### 2.5 åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
```bash
python manage.py createsuperuser
```

#### 2.6 å¯åŠ¨åç«¯æœåŠ¡
```bash
python manage.py runserver
```

âœ… åç«¯æœåŠ¡å°†åœ¨ http://127.0.0.1:8000/ å¯åŠ¨

### 3. å‰ç«¯å¯åŠ¨

#### 3.1 æ–°å¼€ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
```bash
cd frontend
```

#### 3.2 å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–è€…
yarn install
```

#### 3.3 å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
# æˆ–è€…
yarn dev
```

âœ… å‰ç«¯æœåŠ¡å°†åœ¨ http://localhost:3000/ å¯åŠ¨

### 4. è®¿é—®åº”ç”¨

- **å‰ç«¯åº”ç”¨**: http://localhost:3000/
- **åç«¯API**: http://127.0.0.1:8000/api/
- **åç«¯ç®¡ç†åå°**: http://127.0.0.1:8000/admin/

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ„å»ºå‰ç«¯
```bash
cd frontend
npm run build
```

### é…ç½®Djangoé™æ€æ–‡ä»¶
æ„å»ºå®Œæˆåï¼ŒDjangoä¼šè‡ªåŠ¨ä» `frontend/dist/` ç›®å½•æä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€‚

ç”Ÿäº§ç¯å¢ƒè®¿é—®: http://127.0.0.1:8000/

## API æ¥å£è¯´æ˜

### ä¸»è¦APIç«¯ç‚¹

- **èŠå¤©API**: `POST /api/chat/chat/`
- **ä¼šè¯ç®¡ç†**: `GET/POST /api/chat/sessions/`
- **æ–‡æ¡£ç®¡ç†**: `GET/POST /api/documents/`
- **ç”¨æˆ·è®¤è¯**: `POST /api/auth/login/`
- **å¯ç”¨æ¨¡å‹**: `GET /api/chat/models/`

### èŠå¤©APIç¤ºä¾‹

```json
POST /api/chat/chat/
{
    "message": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç³»ç»Ÿ",
    "session_id": 20,  // å¯é€‰ï¼Œä¸æä¾›åˆ™åˆ›å»ºæ–°ä¼šè¯
    "model": "é€šä¹‰åƒé—®"  // å¯é€‰ï¼Œä½¿ç”¨æŒ‡å®šAIæ¨¡å‹
}
```

## ç›®å½•ç»“æ„

```
ai_rag_website/
â”œâ”€â”€ backend/                 # Djangoåç«¯
â”‚   â”œâ”€â”€ config/             # é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ apps/               # åº”ç”¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ accounts/       # ç”¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ chat/          # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ documents/     # æ–‡æ¡£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ knowledge/     # çŸ¥è¯†åº“
â”‚   â”‚   â””â”€â”€ ai_service/    # AIæœåŠ¡é›†æˆ
â”‚   â”œâ”€â”€ manage.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/               # Vue.jså‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ dist/              # æ„å»ºè¾“å‡º
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## å¸¸è§é—®é¢˜

### 1. é™æ€æ–‡ä»¶æ— æ³•åŠ è½½
ç¡®ä¿è¿è¡Œäº† `npm run build` å¹¶ä¸”Djangoçš„é™æ€æ–‡ä»¶é…ç½®æ­£ç¡®ã€‚

### 2. CORSé”™è¯¯
æ£€æŸ¥Djangoçš„CORSè®¾ç½®ï¼Œç¡®ä¿å‰ç«¯åŸŸååœ¨å…è®¸åˆ—è¡¨ä¸­ã€‚

### 3. AIæœåŠ¡è¿æ¥å¤±è´¥
æ£€æŸ¥AIæœåŠ¡é…ç½®ï¼Œç¡®ä¿APIå¯†é’¥å’ŒæœåŠ¡åœ°å€æ­£ç¡®ã€‚

### 4. æ•°æ®åº“é”™è¯¯
é‡æ–°è¿è¡Œè¿ç§»å‘½ä»¤ï¼š
```bash
python manage.py makemigrations
python manage.py migrate
```

## å¼€å‘è¯´æ˜

- åç«¯å¼€å‘æœåŠ¡å™¨æ”¯æŒçƒ­é‡è½½
- å‰ç«¯æ”¯æŒçƒ­æ¨¡å—æ›¿æ¢(HMR)
- APIæ–‡æ¡£å¯é€šè¿‡Django REST Frameworkæµè§ˆå™¨ç•Œé¢æŸ¥çœ‹
- æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»Pythonä¾èµ–

## æŠ€æœ¯æ ˆè¯¦æƒ…

- **Django**: Webæ¡†æ¶
- **Django REST Framework**: APIæ¡†æ¶
- **Vue.js 3**: å‰ç«¯æ¡†æ¶
- **Element Plus**: UIç»„ä»¶åº“
- **Vite**: å‰ç«¯æ„å»ºå·¥å…·
- **Pinia**: çŠ¶æ€ç®¡ç†
- **Axios**: HTTPå®¢æˆ·ç«¯

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚